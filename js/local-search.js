var keepSearchData=function(e){fetch(e+"searchData.json").then(function(e){return e.json()}).then(function(e){localStorage.setItem("searchData",JSON.stringify(e))})},checkAndGetData=function(e){fetch(e+"searchVersion.txt?t="+ +new Date).then(function(e){return e.text()}).then(function(t){localStorage.getItem("searchVersion")!==t&&(localStorage.setItem("searchVersion",t),keepSearchData(e))})},searchFunc=function(e){checkAndGetData(e);var t=localStorage.getItem("searchData"),n=JSON.parse(t),a=document.getElementById("local-search-input");if(a){var r=document.getElementById("local-search-result");a.addEventListener("input",function(){"string"!=typeof t&&(t=localStorage.getItem("searchData"),n=JSON.parse(t)),printRs(this,n,r)})}},searchFuncSW=function(e){fetch(e+"searchData.json").then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e),n=JSON.parse(t),a=document.getElementById("local-search-input");if(a){var r=document.getElementById("local-search-result");a.addEventListener("input",function(){printRs(this,n,r)})}})},printRs=function(e,t,n){var a='<ul class="search-result-list">',r=e.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",e.value.trim().length<=0||(t.forEach(function(e){var t=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var n=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=e.url,i=-1,o=-1,l=-1;if(""!==c?r.forEach(function(e,a){i=n.indexOf(e),o=c.indexOf(e),i<0&&o<0?t=!1:(o<0&&(o=0),0==a&&(l=o))}):t=!1,t){a+="<li><a href='"+s+"' class='search-result-title'>"+n+"</a>";var h=e.content.trim().replace(/<[^>]+>/g,"");if(l>=0){var u=l-20,f=l+80;u<0&&(u=0),0==u&&(f=100),f>h.length&&(f=h.length);var g=h.substr(u,f);r.forEach(function(e){var t=new RegExp(e,"gi");g=g.replace(t,'<em class="search-keyword">'+e+"</em>")}),a+='<p class="search-result">'+g+"...</p>"}a+="</li>"}}),a+="</ul>",n.innerHTML=a)};